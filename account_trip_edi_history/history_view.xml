<?xml version="1.0"?>
<openerp>
    <data>
    <!-- edi.history.order -->
    <record model="ir.ui.view" id="view_edi_history_order_search">
        <field name="name">edi.history.order.search</field>
        <field name="model">edi.history.order</field>
        <field name="arch" type="xml">
           <search string="EDI order search">
                <field name="name" />
                <field name="note" />
                <field name="file" />
                <filter name="original" string="Original" domain="[('modified','=',False)]"/>
                <filter name="modified" string="Modified" domain="[('modified','=',True)]"/>
                <group expand="0" string="Group By...">
                    <filter name="group_modified" string="Modified" context="{'group_by': 'modified'}"/>
                </group>    
           </search>
        </field>
    </record>
    <record model="ir.ui.view" id="view_edi_history_order_form">
        <field name="name">edi.history.order.form</field>
        <field name="model">edi.history.order</field>
        <field name="arch" type="xml">
            <form string="EDI invoce order" version="7.0">        
                <sheet>
                    <group col="4" colspan="4">
                        <field name="name" readonly="1" />
                        <field name="file" />
                        <field name="modified" readonly="1" />
                        <newline/>
                        <separator string="Original order" colspan="4"/>
                        <field name="note" readonly="1" colspan="4" nolabel="1" widget="html"/>
                    </group>
                </sheet>        
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_edi_history_order_tree">
        <field name="name">edi.history.order.tree</field>
        <field name="model">edi.history.order</field>
        <field name="arch" type="xml">
            <tree string="EDI invoce order" colors="red:modified==True">
                <field name="modified" />
                <field name="name" />
                <field name="file" />
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_edi_history_order">
        <field name="name">EDI invoice order</field>
        <field name="res_model">edi.history.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_edi_history_order_tree"/>
        <field name="search_view_id" ref="view_edi_history_order_search"/>
    </record>

    <!-- edi.history.configuration -->
    <record model="ir.ui.view" id="view_edi_history_configuration_form">
        <field name="name">edi.history.configuration.form</field>
        <field name="model">edi.history.configuration</field>
        <field name="arch" type="xml">
            <form string="EDI invoce check config." version="7.0">        
                <sheet>
                    <group col="4" colspan="4">
                        <field name="name" />
                        <field name="code" readonly="1" />
                        <field name="history_path" />
                        <field name="invoice_file" />
                        
                        <field name="delimiter" />
                        <field name="header" />
                        <field name="verbose" />
                        <!--<field name="active" />
                        <field name="invoice_path" />-->
                    </group>
                </sheet>        
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_edi_history_configuration_tree">
        <field name="name">edi.history.configuration.tree</field>
        <field name="model">edi.history.configuration</field>
        <field name="arch" type="xml">
            <tree string="EDI invoce check config.">        
                <field name="name" />
                <field name="code" />
                <field name="history_path" />
                <field name="invoice_file" />
                <field name="delimiter" />
                <field name="header" />
                <field name="verbose" />
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_edi_history_configuration">
        <field name="name">EDI invoice check config.</field>
        <field name="res_model">edi.history.configuration</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_edi_history_configuration_tree"/>
    </record>

    <!-- edi.history.check -->
    <record model="ir.ui.view" id="view_edi_history_check_search">
        <field name="name">edi.history.check.search</field>
        <field name="model">edi.history.check</field>
        <field name="arch" type="xml">
           <search string="EDI check search">
                <field name="name" />
                <field name="name_detail" />
                <field name="line_in" />
                <field name="line_out" />
                <field name="product_code_in" />
                <field name="product_code_out" />
                <field name="quantity_in" />
                <field name="quantity_out" />
                <field name="price_in" />
                <field name="price_out" />
                <field name="document_out" />
                <field name="document_type" />
                <field name="state" />

                <filter name="state" string="Line error" domain="[('state','!=','ok')]"/>
                <filter name="order_error" string="Order error" domain="[('order_error','=',True)]" />
                <filter name="order_error_grouped" string="Check order error" domain="[('order_error','=',True)]" context="{'group_by': ('name')}" />

                <group expand="0" string="Group By">
                    <filter name="group_state" string="State" context="{'group_by': 'state'}"/>
                    <filter name="group_name" string="Order" context="{'group_by': 'name'}"/>
                    <filter name="group_document" string="Document type" context="{'group_by': 'document_type'}"/>
                    <filter name="group_product_code_in" string="Product in" context="{'group_by': 'product_code_in'}"/>
                    <filter name="group_product_code_out" string="Product out" context="{'group_by': 'product_code_out'}"/>
                    <filter name="group_document_out" string="Document number" context="{'group_by': 'document_out'}"/>
                </group>                
           </search>
        </field>
    </record>
    <record model="ir.ui.view" id="view_edi_history_check_form">
        <field name="name">edi.history.check.form</field>
        <field name="model">edi.history.check</field>
        <field name="arch" type="xml">
            <form string="EDI invoce check" version="7.0">        
                <sheet>
                    <group col="4" colspan="4">
                        <field name="name" />
                        <field name="name_detail" />
                        
                        <field name="line_in" />
                        <field name="line_out" />
                        
                        <field name="product_code_in" />
                        <field name="product_code_out" />
                        
                        <field name="document_out" />
                        <field name="document_type" />

                        <field name="quantity_in" />
                        <field name="quantity_out" />

                        <field name="price_in" />
                        <field name="price_out" />
                        
                        <field name="state" />
                        <field name="order_error" invisible="1"/>
                    </group>
                </sheet>        
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="view_edi_history_check_tree">
        <field name="name">edi.history.check.tree</field>
        <field name="model">edi.history.check</field>
        <field name="arch" type="xml">
            <tree string="EDI invoce check" colors="blue:state!='ok'"><!--TODO assign color for error_order-->
                <field name="order_error" invisible="1"/>

                <field name="name" />
                <field name="name_detail" />

                <field name="document_type" />
                <field name="document_out" />

                <field name="product_code_in" />
                <field name="product_code_out" />

                <field name="line_in" />
                <field name="line_out" />

                <field name="quantity_in" />
                <field name="quantity_out" />

                <field name="price_in" />
                <field name="price_out" />

                <field name="state" />
            </tree>
        </field>
    </record>

    <record model="ir.actions.act_window" id="action_edi_history_check">
        <field name="name">EDI invoice check</field>
        <field name="res_model">edi.history.check</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="view_edi_history_check_tree"/>
        <field name="search_view_id" ref="view_edi_history_check_search"/>
        
        <field name="context">{'search_default_order_error_grouped': True}</field>
        <field name="domain">[]</field>
    </record>
    
    <menuitem 
        parent="account_trip.menu_trip_root" 
        id="menu_edi_check_root" 
        name="EDI check"
        sequence="40"
        />
        <menuitem 
            parent="menu_edi_check_root" 
            id="menu_edi_history_check" 
            action="action_edi_history_check"
            name="Invoice check"
            sequence="10"
            />

        <menuitem 
            parent="menu_edi_check_root" 
            id="menu_edi_history_order" 
            action="action_edi_history_order"
            name="Original order"
            sequence="80"
            />

        <menuitem 
            parent="menu_edi_check_root" 
            id="menu_edi_history_configuration" 
            action="action_edi_history_configuration"
            name="Invoice check configuration"
            sequence="90"
            />


    </data>
</openerp>   
