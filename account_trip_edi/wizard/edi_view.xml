<?xml version="1.0"?>
<openerp>
    <data>
        <record id="ir_trip_edi_line_reload_server_action" model="ir.actions.server">
            <field name="sequence" eval="5"/>
            <field name="state">code</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="account_trip_edi.model_trip_edi_line"/>
            <field name="code">action = pool.get('trip.edi.line').load_edi_list(cr, uid, False, context)</field>
            <field name="name">Reload EDI</field>
        </record>  
        
        <!--res.partner (inherit)-->
        <record model="ir.ui.view" id="view_res_partner_destination_form">
            <field name="name">res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account_trip.view_res_partner_destination_form" />
            <field name="arch" type="xml">
                <xpath expr="/form/sheet/group/notebook/page" position="after">
                    <page string="Order waiting">
                        <field name="destination_order_waiting_ids" colspan="4" nolabel="1" readonly="1"/>
                    </page>
                </xpath>
            </field>
        </record>
            
        <record model="ir.ui.view" id="view_res_partner_destination_edi_tree">
            <field name="name">res.partner.tree</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account_trip.view_res_partner_destination_tree" />
            <field name="arch" type="xml">
                <field name="active_order" position="after">
                   <field name="active_order_wait" sum="Total"/>
                </field>    

                <button name="none" position="replace">
                    <button name="none" string="Order not present" type="workflow" attrs="{'invisible':['|',('active_order','>',0),('active_order_wait','>',0)]}" icon="gtk-no"/>
                </button>
                <button name="open_destination_order" position="replace">
                    <button name="open_destination_order" string="Order present" type="object" attrs="{'invisible':[('active_order','=',0),('active_order_wait','=',0)]}" icon="gtk-yes"/>
                </button>    
            </field>
        </record>
                
        <!--MENUITEM-->
        <menuitem parent="menu_trip_trip" id="menu_trip_trip_wizard" name="Refresh EDI order" sequence="10" action="action_trip_edi_wizard_view"/>
        
   </data>
</openerp>   
